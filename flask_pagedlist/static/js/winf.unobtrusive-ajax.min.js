(function(){var e,t,n,r,i,s,o,u,a,f;e=jQuery;t="unobtrusiveAjaxClick";n="unobtrusiveValidation";r=function(t,n){var r,i;if(t==null){return e.noop}r=window;i=(t||"").split(".");while(r&&i.length){r=r[i.shift()]}if(typeof r==="function"){return r}n.push(t);return Function.constructor.apply(null,n)};i=function(e){e=e.toUpperCase();return e==="GET"||e==="POST"};u=function(){if(typeof e.validator==="function"&&typeof e.validator.unobtrusive==="object"){e("form").removeData("validator");e.validator.unobtrusive.parse(e("form"))}};o=function(t,n,r){var i,s,o,a,f;if(r.indexOf("application/x-javascript")!==-1){return}o=jQuery(t);f=o.data("ajax-mode")||"";i=o.data("ajax-update-closest");if(i!=null){a=o.closest(i)}else{a=e(o.data("ajax-update"))}n=jQuery(n);if(a.length<1){if(typeof console!=="undefined"&&console!==null){console.log("winf.unobtrusive-ajax warning: Cannot find element from 'data-ajax-update' on a page.")}}else{switch(f.toUpperCase()){case"BEFORE":a.prepend(n);break;case"AFTER":a.append(n);break;case"REPLACE":a.empty().html(n);break;case"REALREPLACE":a.after(n);a.remove();break;case"BEFOREELEMENT":a.before(n);break;case"AFTERELEMENT":a.after(n);break;default:if(typeof console!=="undefined"&&console!==null){s="winf.unobtrusive-ajax error: Unknown 'data-ajax-mode' = '"+f+"'";console.log(s);alert(s)}}}u();n.find("[autofocus]").focus()};s=function(t,n){var s,u,a,f,l,c;if(t.jquery==null){t=jQuery(t)}c=t.data("ajax-confirm");if(c!=null){if(!window.confirm(c)){return}}l=e(t.data("ajax-loading"));f=t.data("ajax-loading-duration")||0;u=t.data("ajax-disable-onclick");if(u!=null&&u!=="false"){t.attr("disabled","disabled");t.off().on("click",function(e){e.preventDefault();return false});t.filter("a").attr("href","#disabled")}s={dataType:"html",type:t.data("ajax-method")||undefined,url:t.data("ajax-url")||undefined,isMvcAjax:true,mvcTagetElement:t,cache:false,beforeSend:function(e,n){var s;if(n.typeOriginal!=null){if(!i(n.typeOriginal)){e.setRequestHeader("X-HTTP-Method-Override",n.typeOriginal)}}s=r(t.data("ajax-begin"),["jqXHR"]).apply(this,arguments);if(s!==false){l.show(f)}return s},complete:function(e,n){l.hide(f);r(t.data("ajax-complete"),["jqXHR","textStatus"]).apply(this,arguments)},success:function(e,n,i){o(t,e,i.getResponseHeader("Content-Type")||"text/html");r(t.data("ajax-success"),["data","textStatus","jqXHR"]).apply(this,arguments)},error:function(e,n,i){r(t.data("ajax-failure"),["jqXHR","textStatus","errorThrown"]).apply(this,arguments)}};e.extend(n,s);n.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});a=n.type.toUpperCase();n.type=a;if(!i(a)){n.typeOriginal=a;n.type="POST";n.data.push({name:"X-HTTP-Method-Override",value:a})}e.ajax(n)};f=function(e){var t;t=e.data(n);return t!=null?typeof t.validate==="function"?t.validate():void 0:void 0};a=function(e,t,n){var r;if(n==null){n=[]}if(f(e)===false){return}r={url:e.data("ajax-url")||e.attr("action"),type:e.data("ajax-method")||e.attr("method")||"GET",data:e.serializeArray().concat(n)};s(t,r)};e(document).ready(function(){e(document).on("click","a[data-ajax=true]",function(e){var t;e.preventDefault();t={url:this.href,type:"GET",data:[]};s(this,t)});e(document).on("change","select[data-ajax=true]",function(t){var n;t.preventDefault();n=e(t.target);a(n,n,[])});e(document).on("click","form[data-ajax=true] input[type=image], form input[type=image][data-ajax=true]",function(t){var n,r,i,s,o;t.preventDefault();i=e(t.target);s=i.attr("name");r=i.closest("form");o=i.offset();n=[];n.push({name:s+".x",value:Math.round(t.pageX-o.left)});n.push({name:s+".y",value:Math.round(t.pageY-o.top)});a(r,i,n)});e(document).on("click","form[data-ajax=true] :submit",function(t){var n,r,i,s;i=e(t.target);if(i.data("ajax")==="false"||i.data("ajax")===false){e(document).off();return true}t.preventDefault();s=i.attr("name");r=i.closest("form");n=[];if(s!=null){n.push({name:s,value:i.val()})}a(r,i,n)});e(document).on("submit","form[data-ajax=true]",function(t){var n;if(typeof console!=="undefined"&&console!==null){console.log("winf.unobtrusive-ajax.js warning - form submit was triggered directly. Please inspect the case.")}t.preventDefault();n=e(t.target);a(n,n,[])})})}).call(this)
