(function(){var a,e,t,n,o,r,u,i,l,d;a=jQuery,e="unobtrusiveAjaxClick",t="unobtrusiveValidation",n=function(e,t){var n,o;if(null==e)return a.noop;for(n=window,o=(e||"").split(".");n&&o.length;)n=n[o.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))},o=function(a){return a=a.toUpperCase(),"GET"===a||"POST"===a},i=function(){"function"==typeof a.validator&&"object"==typeof a.validator.unobtrusive&&(a("form").removeData("validator"),a.validator.unobtrusive.parse(a("form")))},u=function(e,t,n){var o,r,u,l,d;if(-1===n.indexOf("application/x-javascript")){if(u=jQuery(e),d=u.data("ajax-mode")||"",o=u.data("ajax-update-closest"),l=null!=o?u.closest(o):a(u.data("ajax-update")),t=jQuery(t),l.length<1)"undefined"!=typeof console&&null!==console&&console.log("winf.unobtrusive-ajax warning: Cannot find element from 'data-ajax-update' on a page.");else switch(d.toUpperCase()){case"BEFORE":l.prepend(t);break;case"AFTER":l.append(t);break;case"REPLACE":l.empty().html(t);break;case"REALREPLACE":l.after(t),l.remove();break;case"BEFOREELEMENT":l.before(t);break;case"AFTERELEMENT":l.after(t);break;default:"undefined"!=typeof console&&null!==console&&(r="winf.unobtrusive-ajax error: Unknown 'data-ajax-mode' = '"+d+"'",console.log(r),alert(r))}i(),t.find("[autofocus]").focus()}},r=function(e,t){var r,i,l,d,s,c;null==e.jquery&&(e=jQuery(e)),c=e.data("ajax-confirm"),(null==c||window.confirm(c))&&(s=a(e.data("ajax-loading")),d=e.data("ajax-loading-duration")||0,i=e.data("ajax-disable-onclick"),null!=i&&"false"!==i&&(e.attr("disabled","disabled"),e.off().on("click",function(a){return a.preventDefault(),!1}),e.filter("a").attr("href","#disabled")),r={dataType:"html",type:e.data("ajax-method")||void 0,url:e.data("ajax-url")||void 0,isMvcAjax:!0,mvcTagetElement:e,cache:!1,beforeSend:function(a,t){var r;return null!=t.typeOriginal&&(o(t.typeOriginal)||a.setRequestHeader("X-HTTP-Method-Override",t.typeOriginal)),r=n(e.data("ajax-begin"),["jqXHR"]).apply(this,arguments),r!==!1&&s.show(d),r},complete:function(){s.hide(d),n(e.data("ajax-complete"),["jqXHR","textStatus"]).apply(this,arguments)},success:function(a,t,o){u(e,a,o.getResponseHeader("Content-Type")||"text/html"),n(e.data("ajax-success"),["data","textStatus","jqXHR"]).apply(this,arguments)},error:function(){n(e.data("ajax-failure"),["jqXHR","textStatus","errorThrown"]).apply(this,arguments)}},a.extend(t,r),t.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),l=t.type.toUpperCase(),t.type=l,o(l)||(t.typeOriginal=l,t.type="POST",t.data.push({name:"X-HTTP-Method-Override",value:l})),a.ajax(t))},d=function(a){var e;return e=a.data(t),null!=e&&"function"==typeof e.validate?e.validate():void 0},l=function(a,e,t){var n;null==t&&(t=[]),d(a)!==!1&&(n={url:a.data("ajax-url")||a.attr("action"),type:a.data("ajax-method")||a.attr("method")||"GET",data:a.serializeArray().concat(t)},r(e,n))},a(document).ready(function(){a(document).on("click","a[data-ajax=true]",function(a){var e;a.preventDefault(),e={url:this.href,type:"GET",data:[]},r(this,e)}),a(document).on("change","select[data-ajax=true]",function(e){var t;e.preventDefault(),t=a(e.target),l(t,t,[])}),a(document).on("click","form[data-ajax=true] input[type=image], form input[type=image][data-ajax=true]",function(e){var t,n,o,r,u;e.preventDefault(),o=a(e.target),r=o.attr("name"),n=o.closest("form"),u=o.offset(),t=[],t.push({name:r+".x",value:Math.round(e.pageX-u.left)}),t.push({name:r+".y",value:Math.round(e.pageY-u.top)}),l(n,n,t)}),a(document).on("click","form[data-ajax=true] :submit",function(e){var t,n,o,r;return o=a(e.target),"false"===o.data("ajax")||o.data("ajax")===!1?(a(document).off(),!0):(e.preventDefault(),r=o.attr("name"),n=o.closest("form"),t=[],null!=r&&t.push({name:r,value:o.val()}),void l(n,n,t))}),a(document).on("submit","form[data-ajax=true]",function(e){var t;"undefined"!=typeof console&&null!==console&&console.log("winf.unobtrusive-ajax.js warning - form submit was triggered directly. Please inspect the case."),e.preventDefault(),t=a(e.target),l(t,t,[])})})}).call(this);
